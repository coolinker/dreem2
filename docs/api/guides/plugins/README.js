Ext.data.JsonP.plugins({"guide":"<h1 id='plugins-section-dreem-plugin-guide'>Dreem Plugin Guide</h1>\n<div class='toc'>\n<p><strong>Contents</strong></p>\n<ol>\n<li><a href='#!/guide/plugins-section-directory-structure'>Directory Structure</a></li>\n<li><a href='#!/guide/plugins-section-plugin-file-structure'>Plugin File Structure</a></li>\n</ol>\n</div>\n\n<p>Plugins allow you to provide additional classes and server behavior to a composition.  The structure of a plugin is almost\nidentical composition (though typically without <code>&lt;screen&gt;</code> tags), and is contained within the <code>&lt;plugin&gt;&lt;/plugin&gt;</code> tag.<br/>\nPlugins are added to the server at startup with one or more <code>-plugin /path/to/plugin/</code> command line switches, like so:</p>\n\n<pre><code>node ./server.js -plugin ../plugins/teem-sample_component/ -plugin ../plugins/soundcloud/\n</code></pre>\n\n<h2 id='plugins-section-directory-structure'>Directory Structure</h2>\n\n<pre><code>./index.dre - the main plugin code\n./package.json - names the plugin and provides for a dependencies\n./node_modules/ - node modules that plugin depends on\n./examples/*.dre - optional example compositions that use the plugin\n</code></pre>\n\n<p>The examples will automatically be mounted at <code>/plugins/plugin-name/examples/filename.dre</code></p>\n\n<h2 id='plugins-section-plugin-file-structure'>Plugin File Structure</h2>\n\n<p>Here is a sample index.dre (explained in more detail below):</p>\n\n<pre><code>&lt;plugin&gt;\n  &lt;classes&gt;\n    &lt;class name=\"webrequest\"&gt;\n      &lt;attribute name=\"src\" value=\"\" type=\"string\"&gt;&lt;/attribute&gt;\n      &lt;setter name=\"src\" args=\"val\"&gt;\n        if (val) {\n          dr.teem.server.request(val).then((function (ret) {\n            this.setAttribute('response', ret);\n          }).bind(this));\n        }\n        return val;\n      &lt;/setter&gt;\n      &lt;attribute name=\"response\" value=\"\" type=\"string\"&gt;&lt;/attribute&gt;    \n    &lt;/class&gt;\n  &lt;/classes&gt;\n\n  &lt;server&gt;\n    &lt;handler event=\"init\"&gt;\n      this.__srequest = require('$PLUGIN/sync-request');\n    &lt;/handler&gt;\n    &lt;method name=\"request\" args=\"url\"&gt;\n      if (/^https?:.*/.test(url)) {\n        try {\n          var res = this.__srequest('GET', url);\n          var body = res.getBody().toString();\n          return body;\n        } catch(err) {\n          return ['[ERROR]', err.message].join(' ');\n        }\n      } else {\n        return \"Cannot parse URL:\" + url;\n      }\n    &lt;/method&gt;\n  &lt;/server&gt;\n&lt;/plugin&gt;\n</code></pre>\n\n<p>This plugin provides a simple \"webrequest\" object which can be used in compositions to have the server fetch web pages\nfrom a given URL in it's <code>src</code> attribute, which is then stored in it's <code>response</code> attribute.</p>\n","title":"Dreem Plugin Guide"});